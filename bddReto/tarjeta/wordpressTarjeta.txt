<?php
session_start();
echo "<style>

.ast-separate-container .ast-article-single:not(.ast-related-post), .ast-separate-container .comments-area .comment-respond, .ast-separate-container .comments-area .ast-comment-list li, .ast-separate-container .ast-woocommerce-container, .ast-separate-container .error-404, .ast-separate-container .no-results, .single.ast-separate-container .ast-author-meta, .ast-separate-container .related-posts-title-wrapper, .ast-separate-container.ast-two-container #secondary .widget, .ast-separate-container .comments-count-wrapper, .ast-box-layout.ast-plain-container .site-content, .ast-padded-layout.ast-plain-container .site-content, .ast-separate-container .comments-area .comments-title {

    box-shadow: none;
    background: none;

}

body { 
	width: 100%;
	height:100%;
	font-family: 'Open Sans', sans-serif;
	background: #092756;
	background: -moz-radial-gradient(0% 100%, ellipse cover, rgba(104,128,138,.4) 10%,rgba(138,114,76,0) 40%),-moz-linear-gradient(top,  rgba(57,173,219,.25) 0%, rgba(42,60,87,.4) 100%), -moz-linear-gradient(-45deg,  #670d10 0%, #092756 100%);
	background: -webkit-radial-gradient(0% 100%, ellipse cover, rgba(104,128,138,.4) 10%,rgba(138,114,76,0) 40%), -webkit-linear-gradient(top,  rgba(57,173,219,.25) 0%,rgba(42,60,87,.4) 100%), -webkit-linear-gradient(-45deg,  #670d10 0%,#092756 100%);
	background: -o-radial-gradient(0% 100%, ellipse cover, rgba(104,128,138,.4) 10%,rgba(138,114,76,0) 40%), -o-linear-gradient(top,  rgba(57,173,219,.25) 0%,rgba(42,60,87,.4) 100%), -o-linear-gradient(-45deg,  #670d10 0%,#092756 100%);
	background: -ms-radial-gradient(0% 100%, ellipse cover, rgba(104,128,138,.4) 10%,rgba(138,114,76,0) 40%), -ms-linear-gradient(top,  rgba(57,173,219,.25) 0%,rgba(42,60,87,.4) 100%), -ms-linear-gradient(-45deg,  #670d10 0%,#092756 100%);
	background: -webkit-radial-gradient(0% 100%, ellipse cover, rgba(104,128,138,.4) 10%,rgba(138,114,76,0) 40%), linear-gradient(to bottom,  rgba(57,173,219,.25) 0%,rgba(42,60,87,.4) 100%), linear-gradient(135deg,  #670d10 0%,#092756 100%);
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3E1D6D', endColorstr='#092756',GradientType=1 );
}

#colophon{
    box-shadow: none;
    background: none;
}
.site-below-footer-wrap .ast-builder-grid-row-container .site-footer-focus-item .ast-builder-grid-row-full .ast-builder-grid-row-tablet-full .ast-builder-grid-row-mobile-full .ast-footer-row-stack .ast-footer-row-tablet-stack .ast-footer-row-mobile-stack{
    box-shadow: none;
    background: none;
}

.card-group {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.card {
  position: relative;
  height: 270px;
  width: 450px;
  border-radius: 25px;
  background: black;
  backdrop-filter: blur(30px);  /* This will produce the blur */
  border: 2px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 0 80px rgba(0, 0, 0, 0.2);
  overflow: hidden;
}

input[type=submit]{
position: relative;
button: 200px;



}

.logo img,
.chip img,
.number,
.name,
.from,
.to,
.ring, .type{
  position: absolute; /* All items inside card should have absolute position */
}

.logo img {
  top: 35px;
  right: 40px;
  width: 80px;
  height: auto;
  opacity: 0.8;

}

.chip img {
  top: 120px;
  left: 40px;
  width: 50px;
  height: auto;
  opacity: 0.8;
}

.number,
.name,
.from,
.to, .type {
  color: white;
  font-weight: 600;
  letter-spacing: 2px;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.6);
}

.number {
  left: 40px;
  bottom: 65px;
  font-family: 'Nunito', sans-serif;
}

.type{
left: 40px;
bottom: 200px;
font-family: 'Nunito', sans-serif;

}

.name {
  font-size: 0.7rem;
  left: 40px;
  bottom: 35px;
}

.from {
  font-size: 0.5rem;
  bottom: 35px;
  right: 110px;
}

.to {
  font-size: 0.5rem;
  bottom: 35px;
  right: 40px;
}


</style>";


$tarjeta = file_get_contents('http://10.122.27.162:4000/infocards1/user1/');

$key = "KeyMustBe16ByteOR24ByteOR32ByT1!";

$encrypted_data = base64_decode($tarjeta);


$cookie = openssl_decrypt($encrypted_data, 'AES-256-ECB',$key,OPENSSL_RAW_DATA);

$json = json_decode($cookie);

$activa= $json->current_card;
$num_tarjeta_in= $json->card_international;
$num_tarjeta_eu = $json->card_europe;



if($activa=="INTERNATIONAL"){

echo "<html><div class='card-group'>
<div class='card'>
    <div class='logo'><img src='http://www.grupo2ciber.com/wp-content/uploads/2021/11/visa_logo.png' alt='Visa'></div>
    <div class='chip'><img src='http://www.grupo2ciber.com/wp-content/uploads/2021/11/chip.png' alt='chip'></div>
<div class='type'> $activa</div>
    <div class='number'>$num_tarjeta_in</div>
    <div class='name'>Automon</div>  <!-- Nombre empresa -->
    <div class='from'>10/21</div>
    <div class='to'>06/24</div>
  </div>
</div>
<form action='' method='post'>
    <input type='submit' value='Europe' name='cambiar' class='boton_cambiar_tarjeta'>
</form>

</html>";




}else{

echo "<html><div class='card-group'>
<div class='card'>
    <div class='logo'><img src='http://www.grupo2ciber.com/wp-content/uploads/2021/11/visa_logo.png' alt='Visa'></div>
    <div class='chip'><img src='http://www.grupo2ciber.com/wp-content/uploads/2021/11/chip.png' alt='chip'></div>
<div class='type'> $activa</div>
    <div class='number'>$num_tarjeta_eu</div>
    <div class='name'>Automon</div>  <!-- Nombre empresa -->
    <div class='from'>10/21</div>
    <div class='to'>06/24</div>
  </div>
</div>
<form action='' method='post'>
    <input type='submit' value='International' name='cambiar' class='boton_cambiar_tarjeta'>
</form>

</html>";


}


?>



<?php
if(isset($_POST['cambiar'])){
  if($activa=="INTERNATIONAL"){
     file_get_contents('http://10.122.27.162:4000/enablecard1/user1/EUROPE');
   }else{
     file_get_contents('http://10.122.27.162:4000/enablecard1/user1/INTERNATIONAL');
   }

}



?>